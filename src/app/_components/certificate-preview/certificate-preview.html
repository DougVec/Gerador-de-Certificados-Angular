<div class="certificate-preview-container">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="card-title mb-0">
        <i class="fas fa-eye me-2"></i>
        Preview do Certificado
      </h5>
      <div class="btn-group" role="group">
        <button class="btn btn-sm btn-outline-primary" (click)="generatePDF()" title="Gerar PDF">
          <i class="fas fa-file-pdf"></i>
        </button>
        <button class="btn btn-sm btn-outline-success" (click)="downloadAsImage()" title="Baixar como Imagem">
          <i class="fas fa-download"></i>
        </button>
        <button class="btn btn-sm btn-outline-info" (click)="shareCertificate()" title="Compartilhar">
          <i class="fas fa-share-alt"></i>
        </button>
      </div>
    </div>

    <div class="card-body p-0">
      @if (certificateData()?.studentName && certificateData()?.courseName) {
        <!-- Certificado -->
        <div class="certificate" id="certificate">
          <!-- Ornamentos decorativos -->
          <div class="certificate-border">
            <div class="corner-ornament top-left"></div>
            <div class="corner-ornament top-right"></div>
            <div class="corner-ornament bottom-left"></div>
            <div class="corner-ornament bottom-right"></div>
          </div>

          <!-- Conteúdo do certificado -->
          <div class="certificate-content">
            <!-- Header -->
            <div class="certificate-header">
              <div class="institution-logo">
                <i class="fas fa-graduation-cap"></i>
              </div>
              <h1 class="certificate-title">CERTIFICADO</h1>
              <h2 class="certificate-subtitle">DE CONCLUSÃO</h2>
            </div>

            <!-- Corpo principal -->
            <div class="certificate-body">
              <p class="certificate-text">
                Certificamos que
              </p>

              <h3 class="student-name">{{ certificateData()?.studentName }}</h3>

              <p class="certificate-text">
                concluiu com êxito o curso de
              </p>

              <h4 class="course-name">{{ certificateData()?.courseName }}</h4>

              <div class="course-details">
                <p>
                  ministrado pela <strong>{{ certificateData()?.institution }}</strong>
                  @if (certificateData()?.instructor) {
                    <br>sob orientação de <strong>{{ certificateData()?.instructor }}</strong>
                  }
                  <br>com carga horária total de <strong>{{ certificateData()?.courseHours }} horas</strong>
                </p>
              </div>

              <p class="completion-date">
                Concluído em {{ formatDate(certificateData()?.completionDate || '') }}
              </p>
            </div>

            <!-- Footer -->
            <div class="certificate-footer">
              <div class="signature-section">
                <div class="signature-line"></div>
                <p class="signature-label">Diretor Acadêmico</p>
              </div>

              <div class="certificate-info">
                <p class="certificate-number">
                  Certificado Nº: {{ certificateData()?.certificateNumber }}
                </p>
                <div class="verification-qr">
                  <div class="qr-placeholder">
                    <i class="fas fa-qrcode"></i>
                  </div>
                  <small>Verificação Digital</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      } @else {
        <!-- Estado vazio -->
        <div class="empty-state">
          <div class="empty-icon">
            <i class="fas fa-certificate"></i>
          </div>
          <h5>Preview do Certificado</h5>
          <p class="text-muted">
            Preencha o nome do aluno e o curso para visualizar o certificado
          </p>
        </div>
      }
    </div>
  </div>
</div>
